<div class="flex flex-col items-center gap-y-6 w-full max-w-[320px]">
  <h2 class="text-lg sm:text-3xl text-center text-white w-full p-1 sm:p-2 bg-blue-500 rounded-lg shadow-lg">{{ imagesArray[selectedIndex].name }}</h2>

  <div class="flex items-center justify-center w-full gap-x-4">
    <button [ngClass]="{'invisible': isTeamSelected || isMatchInProgress()}"
            (click)="navigate(-1)"
            class="h-6 w-6 bg-blue-500 text-white rounded-full flex justify-center items-center shadow-lg hover:bg-blue-600 transition cursor-pointer">
      <mat-icon>chevron_left</mat-icon>
    </button>

    <div [ngClass]="{'opacity-50': isTeamSelected}"
         class="flex justify-center items-center w-24 h-24 sm:w-48 sm:h-48 md:w-72 md:h-72 overflow-hidden relative">

      <img [src]="imagesArray[selectedIndex].src"
           [alt]="imagesArray[selectedIndex].alt"
           [ngClass]="currentAnimation"
           (animationend)="onAnimationEnd()"
           class="absolute max-w-full max-h-full object-contain"/>

      @if (nextIndex) {
        <img [src]="imagesArray[nextIndex].src"
             [alt]="imagesArray[nextIndex].alt"
             [ngClass]="nextAnimation"
             class="absolute max-w-full max-h-full object-contain"/>
      }
    </div>

    <button [ngClass]="{'invisible': isTeamSelected  || isMatchInProgress()}"
            (click)="navigate(1)"
            class="h-6 w-6 bg-blue-500 text-white rounded-full flex justify-center items-center shadow-lg hover:bg-blue-600 transition cursor-pointer">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>

  @if (isMatchInProgress()) {
    <div class="flex justify-center items-center gap-x-6">
      <button (click)="removePoints()"
              class="h-10 w-12 bg-red-500 text-white rounded-lg flex justify-center items-center gap-1 shadow-lg cursor-pointer">
        <span class="text-sm font-semibold">-</span>
        <span class="text-sm font-semibold">1</span>
      </button>

      <h2 class="w-14 sm:w-16 p-2 text-3xl sm:text-4xl text-center font-bold text-white bg-blue-500 rounded-lg shadow-lg">{{ points }}</h2>

      <button (click)="addPoints()"
              class="h-10 w-12 bg-green-500 text-white rounded-lg flex justify-center items-center gap-1 shadow-lg cursor-pointer">
        <span class="text-sm font-semibold">+</span>
        <span class="text-sm font-semibold">{{ this.trucoPoints() }}</span>
      </button>
    </div>

    <div class="w-20 p-1 sm:p-2 flex justify-center items-center gap-x-2 bg-amber-500 rounded-lg shadow-lg">
      <img src="./icons/trophy.png" alt="Trophy icon" class="w-5 h-5 object-contain">
      <span class="text-white text-center text-sm sm:text-base font-semibold truncate">{{ victories }}</span>
    </div>
  }

  @if (!isMatchInProgress()) {
    @if (!isTeamSelected) {
      <button (click)="onSelectTeam(imagesArray[selectedIndex])"
              class="w-40 sm:w-44 p-1 sm:p-2 bg-lime-500 text-white rounded-full shadow-lg hover:bg-lime-600 transition cursor-pointer">
        Selecione seu time
      </button>
    } @else {
      <button (click)="onUnselectTeam()"
              class="w-40 sm:w-44 p-1 sm:p-2 bg-orange-500 text-white rounded-full shadow-lg hover:bg-orange-600 transition cursor-pointer">
        Escolha outro time
      </button>
    }
  }
</div>
